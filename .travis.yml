# CI Environment
dist: bionic

# Job Configurations
jobs:
  include:
    - language: python
      python: "3.8.3"
      addons:
        sonarcloud:
          organization: swsnu
          token:
            secure: "LROKA6tbHnu/YP2qBH7LwUVxbzQAsi5SaSg0wWfBlafRUFYIQtz7sw7tevYYEalVkaEj8RucQkSmh/Ks5Qc0XnxuRhYvuVa5LSwfBs2ULdhKCpPJPtyzX1ymvcp2JnJzsktMETomGEzcX0WOX6FNmRFOm59sZybRCQGnEJwy5Z5tYwi0JtwwHHT7MynaKVvSgQuFkWwz2HKua/iXzuKCR/BEZ1bCX6e2nvE6Md1Xoq0avg0/t7pgNG6M7eOb2mlu1djBLWBU4mpgdoesmKxpprGyHeYvZsB+uPaYxwogp2m5hOgR4YcTLvOuFleQFCRvjvdmKBCoPpYJoGxoRr9Gw4fqx0mZSuPPErR4Q+e3iGMaXi3Kkd9UEYhpsG7WfueKTt92fosJNy+2LlZW+1fj2YPZREP+Aav6vH5EciAWEk/TE2Nv0XX9UCmvDaqLlZOJoDNNgfh0o3FwRwAzaWIx70mQLaWMZadfUnxLDVVQh2fUUV9p9TJjAVu/wWqR99GEOvGEEF/1Pw4CkqV7eySmb4YbXdViwh34n4rkfmX6L+s6xYBIGuYpxMnv6o6wHMA3z2UHFNxvUNn5yBvOjM92suFd+k+jdxn0C035I5kPXrQhqR6S45mF/0S0Qt+D8d/B7TI8qjvkliW7jiPrMQdcqjhbtzplD/14+wkR0AWOxIo="
      install:
        - cd backend
        - pip install -r requirements.txt
      script:
        - cd gaejosim
        - pylint **/*.py --load-plugins pylint_django
        - coverage run --source='.' manage.py test
        - coverage xml
        - cd ../.. && sonar-scanner

    - language: node_js
      node_js: 14
      install:
        - cd frontend
        - cd gaejosim
        - yarn install
      script:
        - ./node_modules/.bin/eslint src
        - yarn test --coverage --watchAll=false
